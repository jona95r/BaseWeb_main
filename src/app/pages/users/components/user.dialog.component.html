<p-dialog  header="{{isAdd ? 'Agregar': 'Editar'}} Usuario" [(visible)]="display"
modal="true" blockScroll="true" [style]="{width: '50vw'}">

    <ng-template [ngIf]="loading" [ngIfElse]="data">
        Cargando...
    </ng-template>
    <ng-template #data>
        <form [formGroup]="formUser" *ngIf="formUser" class="mb-5">
            <div class="grid p-fluid">
                <div class="col-12 md:col-6">
                    <span class="mt-4 p-float-label p-input-icon-left">
                        <i class="pi pi-user"></i>
                        <input id="name" type="text" pInputText  formControlName="name" [ngClass]="{ 'is-invalid': submitted && f.name.errors }">
                        <label for="name">Nombre</label>
                    </span>
                    <div *ngIf="formUser.controls['name'].invalid && formUser.controls['name'].dirty" >
                        <small  *ngIf="formUser.controls['name'].errors.required" id="name" class="p-error block">Nombre es requerido</small>
                    </div>
                </div>
                <div class="col-12 md:col-6">
                    <span class="mt-4 p-float-label p-input-icon-left">
                        <i class="pi pi-user"></i>
                        <p-dropdown [options]="roles" formControlName="roleId" optionValue="roleId" optionLabel="description"></p-dropdown>
                        <label for="roleId">Rol</label>
                    </span>
                    <div *ngIf="formUser.controls['roleId'].invalid && formUser.controls['roleId'].dirty" >
                        <small  *ngIf="formUser.controls['roleId'].errors.required" id="roleId" class="p-error block">Rol es requerido</small>
                    </div>
                </div>

                <div class="col-12 md:col-6">
                    <span class="mt-4 p-float-label p-input-icon-left">
                        <i class="pi pi-user"></i>
                        <input id="userName" [disabled]="!isAdd" type="text" pInputText  formControlName="userName"  [ngClass]="{ 'is-invalid': submitted && f.userName.errors }">
                        <label for="userName">Usuario</label>
                    </span>
                    <div *ngIf="formUser.controls['userName'].invalid && formUser.controls['userName'].dirty" >
                        <small  *ngIf="formUser.controls['userName'].errors.required" id="userName" class="p-error block">Usuario es requerido</small>
                    </div>
                </div>

                <div class="col-12 md:col-6">
                    <span class="mt-4 p-float-label p-input-icon-left">
                        <i class="pi pi-user"></i>
                        <p-dropdown [options]="themes" formControlName="themeId" optionValue="themeId" optionLabel="description"></p-dropdown>
                        <label for="theme">Tema</label>
                    </span>
                    <div *ngIf="formUser.controls['themeId'].invalid && formUser.controls['themeId'].dirty" >
                        <small  *ngIf="formUser.controls['themeId'].errors.required" id="themeId" class="p-error block">Tema es requerido</small>
                    </div>
                </div>
                <div class="col-12 md:col-6">
                    <span class="mt-4 p-float-label p-input-icon-left">
                        <i class="pi pi-user"></i>
                        <input id="password" type="password" pInputText  formControlName="password" [ngClass]="{ 'is-invalid': submitted && f.password.errors }">
                        <label for="password">Contraseña</label>
                    </span>
                    <div *ngIf="formUser.controls['password'].invalid && formUser.controls['password'].dirty" >
                        <small  *ngIf="formUser.controls['password'].errors.required" id="password" class="p-error block">Contraseña es requerido</small>
                    </div>
                </div>

                <div class="col-12 md:col-6">
                    <span class="mt-4 p-float-label p-input-icon-left">
                        <i class="pi pi-user"></i>
                        <input id="email" type="text" pInputText  formControlName="email" [ngClass]="{ 'is-invalid': submitted && f.email.errors }">
                        <label for="email">Correo</label>
                    </span>
                    <div *ngIf="formUser.controls['email'].invalid && formUser.controls['email'].dirty" >
                        <small  *ngIf="formUser.controls['email'].errors.required" id="email" class="p-error block">Correo es requerido</small>
                    </div>
                </div>
                <div class="col-12 md:col-12">
                    <p-checkbox binary=true label="Personal de ventas"  name="groupname" [formControl]="formUser.controls['salesPerson']"></p-checkbox>
                </div>
                <div *ngIf="!isAdd" class="col-12 md:col-12">
                    <p-checkbox binary=true label="Activo"  name="groupname" [formControl]="formUser.controls['active']"></p-checkbox>
                </div>

            </div>
        </form>
        <br><br><br><br>
    </ng-template>

    <ng-template pTemplate="footer">
        <ng-template [ngIf]="isAdd" [ngIfElse]="addButton">
            <button pButton type="button" [disabled]="formUser.invalid || loading" (click)="add()" label="Agregar" ></button>
        </ng-template>
        <ng-template #addButton>
            <button pButton type="button" [disabled]="formUser.invalid || loading" (click)="edit()" label="Editar" ></button>
        </ng-template>
    </ng-template>
</p-dialog>
